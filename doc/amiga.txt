plipbox.device SANA-II Setup on Amiga
-------------------------------------

0. Changes

  2011-08-05  38.1a  plip2slip support
  2012-06-03  38.1b  plipbox support
  2013-04-06  0.3    introduced plipbox.device

1. Setup network stack

1.1 AmiTCP as found on Network Boot Disk

 - For a very simple setup you can use the "Network Boot Disk for Amiga"
   and start with this: http://jpv.wmhost.com/NetworkBootDisk/ 
   Insert this disk into your emulator and perform the following steps
   to prepare the disk.
        
 - Copy plipbox.device from this directory to your AmiTCP installation.
   Select the m680x0 version and copy the plipbox.device without the .000 or
   .020 extension to your AmiTCP installation:

        > copy plipbox.device.000 df0:devs/networks/plipbox.device

 - Edit the file "AmiTCP/db/interfaces" and add:
 
        plipbox dev=devs:networks/plipbox.device

 - Adjust your AmiTCP:bin/startnet to setup the interface to "plipbox0".
   In the network boot disk: Edit "df0:s/Prefs/Env-Archive/nbddriver" (EnvARC:)
   and set "plipbox0"

 - In EnvARC:sana2 (Network Boot Disk: "df0:s/Prefs/Env-Archive") you can
   place an optional configuration file called "plipbox.config".
   For options see the plipbox documentation.

 - Correctly set your IPs and use the same ones as defined in the plipbox
   firmware (see doc/firmware.txt):
   
     amiga IP      = address of your Amiga
     plip port IP  = address of the plipbox (on the PLIP port)
     
   In the network boot disk use EnvARC:nbdgw to set the plip port IP and
   EnvARC:nbdip to set the amiga IP.

 - Do not forget to configure the correct DNS server otherwise you won't be
   able to resolve non-numeric IP addresses. Have a look at the file
   AmiTCP:db/netdb-myhost and adapt the NAMESERVER entry accordingly.
   Use the DNS server of your local network here. (in my setup 192.168.2.1).
   The network boot disk uses the IP address stored in the EnvARC:nbdns file.


2. Build plipbox.device from Source

 - Only for advanced users! All others can use the supplied binaries!
 
 - I cross-compile the binaries with vamos running the SAS C V6.58 compiler
 
 - Install vamos on your Mac or PC -> see [1]
 
 - Copy the following Amiga Directories either from a real machine or an emulator
   to a common directory on your Mac. The directory is named $HOME/amiga/shared
   here but you can use another directory as well but need to adjust AMIGA_DIR
   in amiga/src/makefile!
   
   ~/amiga/shared:
      wb310             system root of a Workbench 3.1 HD Installation
      sc                complete installation directory of SAS C 6.58
      AmiTCP-SDK-4.3    AmiTCP SDK e.g. from here [2]
 
 - Enter directory 'amiga/src' of this release
 
 - Build with:
      > make dist       build release files
      > make all        build without optimization
      > make all_opt    build with optimization
      > make clean      remove all built files

 - The resulting files can then be found in 'amiga/bin'

[1] http://lallafa.de/blog/amiga-projects/amitools/vamos/
[2] http://aminet.net/package/comm/tcp/AmiTCP-SDK-4.3

EOF